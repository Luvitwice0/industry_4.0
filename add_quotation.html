<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quotation Managenment</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!-- Font Awesome Kit -->
    <script src="https://kit.fontawesome.com/7013ed1e06.js" crossorigin="anonymous"></script>

    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">

    <!-- Select2 CSS -->
    <link href="assets/dist/css/select2.min.css" rel="stylesheet" />

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

    <!-- Select2 JS -->
    <script src="assets/dist/js/select2.min.js"></script>

    <script type="text/javascript" src="assets/daterangepicker-master/moment.min.js"></script>
    <script type="text/javascript" src="assets/daterangepicker-master/daterangepicker.js"></script>
    <link rel="stylesheet" type="text/css" media="all" href="assets/daterangepicker-master/daterangepicker.css">
</head>
<style>
    body {
        margin: auto;
        /* padding: 20px; */
        font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    }

    .main-container {
        padding: 10px;
    }

    .select2-container {
        z-index: 3060;
    }

    .input-field {
        position: relative;
    }

    .input-field input {
        width: 100%;
        height: 40px;
        border-radius: 3px;
        font-size: 18px;
        padding: 0 15px;
        border: 2px solid #bababa;
        background: transparent;
        color: #000000;
        outline: none;
    }

    .input-field label {
        position: absolute;
        top: 50%;
        left: 15px;
        transform: translateY(-50%);
        color: #212529;
        font-size: 16px;
        pointer-events: none;
        transition: 0.3s;
    }

    input:focus {
        border: 2px solid #0d6efd;
    }

    input:focus~label {
        color: #0d6efd;
    }

    input:focus~label,
    input:valid~label {
        top: 0;
        left: 15px;
        font-size: 16px;
        padding: 0 2px;
        background-color: white;
    }

    .required-field {
        border: 2px solid #f80000 !important;
    }

    body.offcanvas-active {
        overflow: hidden;
    }

    .dataTables_wrapper .dataTables_filter input {
        width: 300px;
        border: 2px solid #ced4da;
        border-radius: 5px;
        padding: 5px;
        margin-bottom: 10px;
        margin-right: 10px;
    }


    .select2-container {
        width: 100% !important;

    }

    .dataTables_length {
        margin-bottom: 10px;
    }

    .dataTables_length select {
        width: auto;
        border: 2px solid #ced4da;
        border-radius: 5px;
        padding: 5px;
    }

    .dataTables_length label {
        margin-right: 5px;
        font-weight: bolder;
    }

    #cards_landscape_wrap-2 .card-flyer .image-box {

        overflow: hidden;
        box-shadow: 0px 2px 15px rgba(0, 0, 0, 0.50);
        border-radius: 5px;
    }

    #cards_landscape_wrap-2 .card-flyer .image-box img {

        width: 100%;
        height: 50%;

    }

    #offcanvasRight {
        width: 450px;
        /* Change this value to your desired width */
    }




    .image-box .fa-check {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
        color: black;
        /* You can adjust the color as needed */
        display: none;
    }


    .image-box img.selected {
        border: 4px solid rgb(57, 102, 214);
    }

    #cards_landscape_wrap-2 .card-flyer {
        background: #FFFFFF;
        -webkit-transition: all 0.2s ease-in;
        -moz-transition: all 0.2s ease-in;
        -ms-transition: all 0.2s ease-in;
        -o-transition: all 0.2s ease-in;
        transition: all 0.2s ease-in;
        box-shadow: 0px 3px 4px rgba(0, 0, 0, 0.40);
    }

    #cards_landscape_wrap-2 .card-flyer:hover {
        background: #fff;
        box-shadow: 0px 15px 26px rgba(0, 0, 0, 0.50);
        -webkit-transition: all 0.2s ease-in;
        -moz-transition: all 0.2s ease-in;
        -ms-transition: all 0.2s ease-in;
        -o-transition: all 0.2s ease-in;
        transition: all 0.2s ease-in;
    }

    .image-box input:checked {
        background-color: rgba(0, 0, 0, 0.5);
    }

    .image-box input:checked ::after {
        content: 'âœ”';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 30px;
        height: 30px;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 20px;
        text-align: center;
        border: 1px solid white;
        border-radius: 50%;
    }
</style>

<body>
    <div class="main-container">

        <br>
        <div class="container">
            <div class="row">
                <div class="col lg-2">
                    <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"><i class="fa fa-plus"></i>
                        <b>Add Quotation</b>
                    </button>
                </div>
                <div class="col lg 8"></div>
                <div class="col-lg-2 col-md-4 col-sm-6 mt-3 mt-md-0">
                    <input class="form-control mr-sm-2" type="text" id="myInputx" placeholder="Search"
                        aria-label="Search " name="search">
                </div>
                <div class="col-lg-1 col-md-4 mt-3 mt-md-0" style="padding-left: 0px;">
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">
                        <i class="fa fa-search" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
        </div>

        <br>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <table id="example" class="table table-responsive table-hover">
                        <thead class="bg-gradient">
                            <tr>
                                <th class="text-center">Quotation No</th>
                                <th class="text-center">Customer</th>
                                <th class="text-center">Delivery date</th>
                                <th class="text-center">Total</th>
                                <th class="text-center">Details</th>
                                <th class="text-center">Action</th>
                            </tr>
                        </thead>
                        <tbody class="text-center" id="prodction_plan">

                        </tbody>
                    </table>
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-4 col-md-12 mb-2"></div>
                            <div class="col-lg-4 col-md-12 mb-2">
                                <nav aria-label="..." id="page1">
                                    <ul class="pagination justify-content-center" id="pagination1"></ul>
                                </nav>
                            </div>
                            <div class="col-lg-4 col-md-12 mb-2"></div>
                        </div>
                        <br>
                    </div>
                </div>
            </div>
        </div>

        <!-- model for create production plan -->

        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasRightLabel">Add Quotation</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>


            <div class="offcanvas-body">
                <div class="row">
                    <div class="col-md-12">
                        <!-- <div class="form-group"> <label for="prodId">Production ID</label> <input
                            class="form-control" id="prodId"></input> </div> -->
                        <div class="input-field">
                            <input type="text" required="required" id="q_no" spellcheck="false">
                            <label>Quotation No</label>
                        </div>
                        <br>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="selectCustomerName">Choose Customer</label>
                                <select style="width:100%" id="selectCustomerName" class="js-example-basic-single">
                                    <option>Chooose Product</option>
                                </select>
                            </div>
                        </div>
                        <br>
                        <!-- <div class="col-md-12">
                            <div class="form-group">
                                <label for="selectProductName">Choose Product</label>
                                <select style="width:100%" id="selectProductName" class="js-example-basic-single">
                                    <option>Chooose Product</option>
                                </select>
                            </div>
                        </div>
                        <br> -->


                        <div class="row">
                            <div class="col-lg-6">
                                <label for="selectProductName">Choose Product</label>
                                <select id="selectProductName" class="js-example-basic-single">
                                    <option>Select Drop Product</option>
                                    <!-- Add other options here -->
                                </select>
                            </div>

                            <div class="col-lg-6">
                                <label for="quantity">Quantity</label>
                                <input type="text" class="form-control" id="q_quantity" placeholder="Enter quantity">
                            </div>
                            <br>
                            <button type="button" class="btn btn-primary" id="addSubItemButton"
                                style="width: 15%; float: right; margin-left: 12px; margin-top: 10px;">Add</button>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-12">
                                <table id="productTable" class="response"
                                    style="width: 100%; border: 1px solid black; border-right: 1px solid black;">
                                    <thead>
                                        <tr style="text-align: center;">
                                            <th style="border: 1px solid black;">Product</th>
                                            <th style="border: 1px solid black;">Quantity</th>
                                            <th style="border: 1px solid black;">Price</th>
                                            <th style="border: 1px solid black;">Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody style="text-align: center;"></tbody>
                                </table>
                            </div>
                        </div>
                        <hr>
                        <div class="md-12">
                            <div class="input-field">
                                <input type="text" required="required" id="q_bl_ads" spellcheck="false">
                                <label>Bill to Address</label>
                            </div>
                        </div>
                        <br>
                        <div class="md-12">
                            <div class="input-field">
                                <input type="text" required="required" id="q_total" spellcheck="false">
                                <label>Total</label>
                            </div>
                        </div>
                        <br>
                        <div class="md-12">
                            <div class="form-outline">
                                <label>Terms of Payment</label>
                                <textarea class="form-control" id="q_tp" rows="2"></textarea>
                            </div>
                        </div>
                        <br>
                        <!-- Textarea 2 rows height -->
                        <div class="md-12">
                            <div class="form-outline">
                                <label>Terms of Delivery</label>
                                <textarea class="form-control" id="q_td" rows="2"></textarea>
                            </div>
                        </div>
                        <br>
                    </div>

                    <div class="row">
                        <button type="button" style="margin-left: 12px;" class="btn btn-primary" data-bs-toggle="modal"
                            data-bs-target="#exampleModal" onclick=""><i class="fas fa-hand-pointer"></i> <b>Choose
                                Template</b> </button>
                    </div>
                    <br>
                </div>
            </div>
        </div>


        <!-- Modal 1 -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Choose Templates</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" style="padding: 20px;">
                        <div id="cards_landscape_wrap-2" style="padding: 10px;">
                            <div class="row">
                                <div class="col-xs-12 col-sm-6 col-md-3 col-lg-4">

                                    <div class="card-flyer">

                                        <div class="image-box">
                                            <img src="https://cdn.geckoandfly.com/wp-content/uploads/2019/06/sales-services-invoice-03.jpg"
                                                alt="" />
                                        </div>
                                    </div>

                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-3 col-lg-4">

                                    <div class="card-flyer">

                                        <div class="image-box">
                                            <img src="https://www.invoicesimple.com/wp-content/uploads/2018/06/Invoice-Template-Big-Margin-rent.png"
                                                alt="" />
                                        </div>
                                    </div>

                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-3 col-lg-4">

                                    <div class="card-flyer">

                                        <div class="image-box">
                                            <img src="https://th.bing.com/th/id/OIP.rhizG0dahMpk-dr1TDINrAHaJi?pid=ImgDet&w=200&h=258&c=7&dpr=1.3"
                                                alt="" />
                                        </div>

                                    </div>

                                </div>
                            </div>

                        </div>
                        <br>
                        <div id="cards_landscape_wrap-2" style="padding: 10px;">
                            <div class="row">
                                <div class="col-xs-12 col-sm-6 col-md-3 col-lg-4">

                                    <div class="card-flyer">

                                        <div class="image-box">
                                            <img src="https://th.bing.com/th/id/OIP.OsYlYvhcClkgkXQv83CADQHaJQ?pid=ImgDet&w=200&h=250&c=7&dpr=1.3"
                                                alt="" />

                                        </div>
                                    </div>

                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-3 col-lg-4">

                                    <div class="card-flyer">

                                        <div class="image-box">
                                            <img src="https://th.bing.com/th/id/OIP.OWsWV0yv8pfXWsrogUIPcQAAAA?pid=ImgDet&w=200&h=259&c=7&dpr=1.3"
                                                alt="" />

                                        </div>
                                    </div>

                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-3 col-lg-4">

                                    <div class="card-flyer">

                                        <div class="image-box">
                                            <img src="https://www.typecalendar.com/wp-content/uploads/2023/04/landscaping-invoice-template-google-docs.jpg?gid=22"
                                                alt="" />
                                        </div>

                                    </div>

                                </div>
                            </div>

                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary mr-auto" data-dismiss="modal">Preview
                            Template</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal 1 -->

        <div class="modal fade" id="view_product001" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Item Details
                        </h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="table-responsive">
                                    <table class="table table-hover text-center"
                                        style="width:100%; border: 1px solid black; ">
                                        <thead>
                                            <tr>
                                                <th class="col-md-2">Product</th>
                                                <th class="col-md-2">Quantity</th>
                                                <th class="col-md-2">Price</th>

                                            </tr>
                                        </thead>
                                        <tbody style="vertical-align: middle;">
                                            <tr>
                                                <td>Aluminium Foil</td>
                                                <td>12</td>
                                                <td>1200</td>
                                            </tr>

                                            <tr>
                                                <td>wood Table</td>
                                                <td>50</td>
                                                <td>5000</td>
                                            </tr>

                                            <tr>

                                                <td>Titanium Cupboard</td>
                                                <td>50</td>
                                                <td>12000</td>
                                            </tr>


                                        </tbody>
                                    </table>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MODAL SCRIPT -->



        <script>
            function addQuotationData() {
                var fields = ["q_no", "selectCustomerName", "q_bl_ads", "q_total", "q_tp", "q_td"];
                var hasEmptyField = false;

                for (var i = 0; i < fields.length; i++) {
                    var fieldId = fields[i];
                    var input = document.getElementById(fieldId);

                    var value = input.value.trim();

                    if (value === "") {
                        input.classList.add("required-field");
                        hasEmptyField = true;
                    } else {
                        input.classList.remove("required-field");
                    }
                }

                if (hasEmptyField) {
                    return;
                }

                var q_no = document.getElementById("q_no").value;
                var q_bl_ads = document.getElementById("q_bl_ads").value;
                var q_total = document.getElementById("q_total").value;
                var q_tp = document.getElementById("q_tp").value;
                var q_td = document.getElementById("q_td").value;
                var c_name = document.getElementById("selectCustomerName").value;

                // Create an array to store the product data
                var productsDataArray = [];

                // Iterate over the productsData array and add each product data to productsDataArray
                for (var i = 0; i < productsData.length; i++) {
                    var productData = productsData[i];
                    productsDataArray.push({
                        productName: productData.productName,
                        quantity: productData.quantity,
                        price: productData.price
                    });
                }

                var JsonDataAddQuotation = {
                    quotation_number: q_no,
                    quotation_bill_address: q_bl_ads,
                    quotation_total: q_total,
                    quotation_payment: q_tp,
                    quotation_delivery: q_td,
                    c_customer: c_name,
                    productsData: productsDataArray // Add the array of product data
                };

                console.log(JsonDataAddQuotation);
                $('#selectCustomerName').val(null).trigger('change');
                $('#selectProductName').val(null).trigger('change');

                // Clear the input fields
                document.getElementById("q_no").value = "";
                document.getElementById("q_bl_ads").value = "";
                document.getElementById("q_total").value = "";
                document.getElementById("q_tp").value = "";
                document.getElementById("q_td").value = "";
            }
        </script>


        <script>

            var dataTableInitialized = false;

            function updateTableData() {
                var xhr = new XMLHttpRequest();

                xhr.onreadystatechange = function () {
                    if (xhr.readyState === XMLHttpRequest.DONE) {
                        if (xhr.status == 200) {
                            var response = xhr.responseText;
                            var jsonData = JSON.parse(response);
                            console.log(jsonData)
                            updateDataToTable(jsonData.add_quotation);
                            updateDropdownOption01(jsonData.add_quotation);
                            updateDropdownOption02(jsonData.add_quotation);
                            // Initialize DataTables if it hasn't been initialized already
                            displayTableRows();
                        }
                        else {
                            console.error("failed to get the data from server")
                        }

                    }

                }
                xhr.open("GET", "09_add_quotation.json", true)
                xhr.send();
            }

            function updateDataToTable(add_quotation) {
                var tableBody = document.getElementById("prodction_plan")
                var data = add_quotation;
                for (var i = 0; i < data.length; i++) {
                    var datax = data[i];

                    var table_row = document.createElement("tr")

                    var quotation_number = document.createElement("td");
                    quotation_number.textContent = datax.q_no;
                    table_row.appendChild(quotation_number);

                    var quotation_product = document.createElement("td");
                    quotation_product.textContent = datax.q_product
                    table_row.appendChild(quotation_product);

                    var quotation_quantity = document.createElement("td");
                    quotation_quantity.textContent = datax.q_quantity
                    table_row.appendChild(quotation_quantity);



                    var quotation_dly_date = document.createElement("td");
                    quotation_dly_date.textContent = datax.q_dly_date
                    table_row.appendChild(quotation_dly_date);


                    var action = document.createElement("td");
                    action.innerHTML = `<button class="btn btn-secondary"  data-bs-toggle="modal"
                         data-bs-target="#view_product001">View Products</button>`;
                    table_row.appendChild(action);




                    var action = document.createElement("td");
                    action.innerHTML = `<i class="fa fa-trash" style="cursor:pointer"></i>`;
                    table_row.appendChild(action);

                    tableBody.appendChild(table_row)
                }
            }
            updateTableData()

            function updateDropdownOption01(data) {
                console.log(1);
                var employeeSelect = document.getElementById("selectProductName");
                employeeSelect.innerHTML = '<option value=""><--Select File name --></option>';

                var employeeNames = [];

                for (var i = 0; i < data.length; i++) {
                    var entry = data[i];

                    if (entry.q_product && employeeNames.indexOf(entry.q_product) === -1) {
                        employeeNames.push(entry.q_product);

                        var option = document.createElement("option");
                        option.value = entry.q_product;
                        option.textContent = entry.q_product;
                        employeeSelect.appendChild(option);

                        console.log(employeeSelect.appendChild(option))
                    }
                }
            }

            function updateDropdownOption02(data) {
                console.log(1);
                var employeeSelect = document.getElementById("selectCustomerName");
                employeeSelect.innerHTML = '<option value=""><--Select File name --></option>';

                var employeeNames = [];

                for (var i = 0; i < data.length; i++) {
                    var entry = data[i];

                    if (entry.q_c_name && employeeNames.indexOf(entry.q_c_name) === -1) {
                        employeeNames.push(entry.q_cu);

                        var option = document.createElement("option");
                        option.value = entry.q_c_name;
                        option.textContent = entry.q_c_name;
                        employeeSelect.appendChild(option);

                        console.log(employeeSelect.appendChild(option))
                    }
                }
            }




        </script>
        <script>
            function addRawItemData(rowIndex) {
                var delectCellRow = rowIndex
                console.log(delectCellRow);
            }
        </script>
        <script>
            function initDataTable() {
                $('#example').DataTable({
                    language: {
                        "searchPlaceholder": "Search records",
                        "search": ""
                    },
                    lengthMenu: [10, 25, 50, 100],
                    fnDrawCallback: function () {
                        $("input[type='search']").attr("class", "searchBox");
                        $('div.dataTables_length select').attr("class", "selectBox");
                    }
                });
            }
            updateTableData();
        </script>
        <script>
            $(document).ready(function () {
                $('.js-example-basic-single').select2();
            });
        </script>

        <script type="text/javascript">
            $(function () {

                var start = moment().subtract(29, 'days');
                var end = moment();

                function cb(start, end) {
                    $('#reportrange span').html(
                        start.format('D MMMM, YYYY') + ' - ' + end.format('D MMMM, YYYY')
                    );
                }

                $('#reportrange').daterangepicker({
                    startDate: start,
                    endDate: end,
                    ranges: {
                        'Today': [
                            moment(), moment()
                        ],
                        'Last 7 Days': [
                            moment().subtract(6, 'days'),
                            moment()
                        ],
                        'Last 30 Days': [
                            moment().subtract(29, 'days'),
                            moment()
                        ]
                    }
                }, cb);

                cb(start, end);

            });
        </script>
        <script>
            function searchTable() {
                var inputx = document
                    .getElementById("myInputx")
                    .value
                    .toLowerCase();
                var rowsx = document.querySelectorAll("#example tbody tr");

                var found = false; // Variable to track if any matching rows are found

                for (var i = 0; i < rowsx.length; i++) {
                    var rowx = rowsx[i];
                    var rollNumberCellx = rowx.cells[1]
                        ? rowx
                            .cells[1]
                            .textContent
                            .toLowerCase()
                        : '';
                    var customerNameCell = rowx.cells[3]
                        ? rowx
                            .cells[3]
                            .textContent
                            .toLowerCase()
                        : '';

                    var selectDeviceCellx = rowx.cells[2]
                        ? rowx
                            .cells[2]
                            .textContent
                            .toLowerCase()
                        : '';

                    if (rollNumberCellx.includes(inputx) || selectDeviceCellx.includes(inputx) || customerNameCell.includes(inputx)) {
                        rowx.style.display = "";
                        // displayTableRows();
                        found = true;
                    } else {
                        rowx.style.display = "none";

                    }
                }
                if (inputx === '') {
                    currentPage = 1;
                    displayTableRows();
                }

                var existingNoDataRow = document.getElementById("noDataRow");
                if (existingNoDataRow) {
                    existingNoDataRow.remove();
                }

                // Create a new row for the "No data found" message
                if (!found) {

                    var tableBody = document.querySelector("#example tbody");
                    var noDataRow = tableBody.insertRow();
                    var cell = noDataRow.insertCell(0);
                    cell.colSpan = 7;
                    cell.textContent = "No data found.";
                    noDataRow.id = "noDataRow";
                }

            }
            var searchInput = document.getElementById("myInputx");
            searchInput.addEventListener("keyup", searchTable);
        </script>
        <script>
            var currentPage = 1;
            var rowsPerPage = 10;
            var pagesToShow = 5; // Number of pages to display in the pagination

            function displayTableRows() {
                var tableRows = document.querySelectorAll('#prodction_plan tr');
                var totalPages = Math.ceil(tableRows.length / rowsPerPage);

                // Update the pagination based on the total number of pages
                var paginationList = document.querySelector('.pagination');
                paginationList.innerHTML = ''; // Clear existing items

                // Add Previous button
                var previousButton = document.createElement('li');
                previousButton.className = 'page-item';
                previousButton.id = 'previousButton';
                previousButton.innerHTML = '<a class="page-link" href="#">Previous ';
                previousButton.addEventListener('click', previousPage); // Add event listener
                paginationList.appendChild(previousButton);

                // Calculate the start and end page numbers to display
                var startPage = Math.max(1, currentPage - Math.floor(pagesToShow / 2));
                var endPage = Math.min(startPage + pagesToShow - 1, totalPages);

                // Add page items dynamically
                for (var i = startPage; i <= endPage; i++) {
                    var pageItem = document.createElement('li');
                    pageItem.className = 'page-item';
                    if (i === currentPage) {
                        pageItem
                            .classList
                            .add('active');
                    }
                    var pageLink = document.createElement('a');
                    pageLink.className = 'page-link';
                    pageLink.href = '#';
                    pageLink.textContent = i;
                    pageLink.onclick = function () {
                        goToPage(parseInt(this.textContent));
                    };
                    pageItem.appendChild(pageLink);
                    paginationList.appendChild(pageItem);
                }

                // Add Next button
                var nextButton = document.createElement('li');
                nextButton.className = 'page-item';
                nextButton.id = 'nextButton';
                nextButton.innerHTML = '<a class="page-link" href="#">Next ';
                nextButton.addEventListener('click', nextPage); // Add event listener
                paginationList.appendChild(nextButton);

                // Show/hide table rows based on current page
                var startIndex = (currentPage - 1) * rowsPerPage;
                var endIndex = startIndex + rowsPerPage;
                for (var i = 0; i < tableRows.length; i++) {
                    if (i >= startIndex && i < endIndex) {
                        tableRows[i].style.display = 'table-row';
                    } else {
                        tableRows[i].style.display = 'none';
                    }
                }
            }

            function goToPage(pageNumber) {
                currentPage = pageNumber;
                displayTableRows();
            }

            function previousPage() {
                if (currentPage > 1) {
                    currentPage--;
                    displayTableRows();
                }
            }

            function nextPage() {
                var tableRows = document.querySelectorAll('#prodction_plan tr');
                var totalPages = Math.ceil(tableRows.length / rowsPerPage);

                if (currentPage < totalPages) {
                    currentPage++;
                    displayTableRows();
                }
            }

            // Call displayTableRows() after defining the functions
            displayTableRows();
        </script>

        <!-- Add a script block to calculate price -->
        <script>
            function calculatePrice(product, quantity) {
                // Replace this with your logic to generate a random price
                var minPrice = 5; // Minimum price
                var maxPrice = 200; // Maximum price

                // Generate a random price within the specified range
                var price = Math.floor(Math.random() * (maxPrice - minPrice + 1)) + minPrice;

                return price * quantity;
            }


            // Initialize an array to store product data
            var productsData = [];

            function addProductToTable() {
                var productSelect = document.getElementById("selectProductName");
                var quantityInput = document.getElementById("q_quantity");

                var product = productSelect.value;
                var quantity = quantityInput.value;

                // Calculate the price
                var price = calculatePrice(product, quantity);

                // Store product data in the array
                var productData = {
                    productName: product,
                    quantity: quantity,
                    price: price
                };

                productsData.push(productData); // Add the data to the array

                // Add the product to the table
                var productTableBody = document.querySelector("#productTable tbody");
                var newRow = document.createElement("tr");
                newRow.innerHTML = `
                                   <td style="border: 1px solid #000000;">${product}</td>
                                   <td style="border: 1px solid #000000;">${quantity}</td>
                                   <td style="border: 1px solid #000000;">${price}</td>
                                   <td><i class="fa fa-trash" style="cursor:pointer"></i></td>
                                    `;

                productTableBody.appendChild(newRow);

                // Clear the quantity input
                quantityInput.value = "";

                // Attach a click event listener to the document
                document.addEventListener("click", function (event) {
                    if (event.target.classList.contains("fa-trash")) {
                        deleteRow(event);
                        // Update summary after row deletion (if needed)
                    }
                });

                function deleteRow(event) {
                    var row = event.target.closest("tr");
                    if (row) {
                        // Remove the corresponding data from the array
                        var index = Array.from(productTableBody.children).indexOf(row);
                        productsData.splice(index, 1);

                        row.remove();
                    }
                }
            }

            // Function to display the stored product data
            function displayProductsData() {
                console.log("Products Data:", productsData);
            }

        </script>

        <!-- Update the button click event to call the addProductToTable function -->
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                var addProductButton = document.getElementById("addSubItemButton");
                addProductButton.addEventListener("click", addProductToTable);
            });
        </script>
        <script>
            $(document).ready(function () {
                $('.image-box img').click(function () {
                    // Remove tick mark and border from previously selected image
                    $('.image-box img').removeClass('selected');
                    $('.fa.fa-check').remove(); // Remove any existing checkmark icons

                    // Add tick mark and border to the clicked image
                    $(this).addClass('selected');
                    $(this).parent().append('<i class="fa fa-check"></i>'); // Add checkmark icon to the parent of the clicked image

                    // Position the checkmark icon at the center of the image
                    var imgWidth = $(this).width();
                    var imgHeight = $(this).height();
                    var iconSize = 24; // Assuming the size of the checkmark icon is 24x24 pixels
                    var leftPos = (imgWidth - iconSize) / 2;
                    var topPos = (imgHeight - iconSize) / 2;
                    $('.fa.fa-check').css({ 'position': 'absolute', 'left': leftPos, 'top': topPos });
                });
            });
        </script>
</body>

</html>