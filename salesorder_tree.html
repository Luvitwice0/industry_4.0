<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SalesOrder Tree</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Bootstrap Library -->
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" type="text/css" media="all" href="assets/daterangepicker-master/daterangepicker.css">
    <script src="assets/lib/jquery/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            padding: 5px;

            box-sizing: border-box;
            border: 1px solid #ddd;
        }

        #main_table {
            font-family: Arial, Helvetica, sans-serif;
            border-collapse: separate;
            border-spacing: 0 10px;
            width: 100%;
            border: none;
        }

        #main_table td,
        #main_table th {
            padding: 10px;
            border: none;
        }

        #main_table tr {
            background-color: #e8ebeb;
            border: none;
        }

        #main_table tbody tr:hover {
            transform: scale(1.06);
            transition: transform 0.4s ease;
            cursor: pointer;
        }

        #main_table th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: center;
            background-color: #95A5A6;
            border: none;
        }

        #main_table td:first-child,
        #main_table th:first-child {
            border-radius: 10px 0 0 10px;
            border: none;
        }

        #main_table td:last-child,
        #main_table th:last-child {
            border-radius: 0 10px 10px 0;
            border: none;
        }

        details details {
            margin-left: 10pt;
        }

        .treeview {
            padding: 5pt;
            border: inset 2px lightGray;
            width: 240pt;
            font: 10pt Arial;
            display: inline-block;
        }

        summary[selected="true"] {
            background-color: rgb(255, 255, 199);
        }


        summary {
            cursor: pointer;
            font-size: medium;
            margin-bottom: 5px;
            width: 100%;
        }

        summary:hover {
            background-color: #aaaaaa;
        }


        summary .icon {
            width: 16px;
            height: 16px;
        }



        summary:only-child::-webkit-details-marker {
            color: transparent;
        }


        .label {
            font-weight: bold;
        }

        .descr {
            font-size: 10pt
        }

        .treeview {

            width: 100%;
            height: 500px;
            /* Set the maximum height */
            overflow-y: auto;
            /* Enable vertical scroll */
            border: 1px solid black;
            /* Optional: add a border */
            padding: 20px;
            /* Optional: add padding */
            margin-bottom: 10px;
        }

        .treeview details {
            margin-bottom: 10px;
            /* Set the spacing between items */
        }
    </style>
</head>

<body>
    <div class="row" style="padding-top: 10px; padding-bottom: 5px;">
        <!-- Select Month and Add Button -->


        <div class=" col-lg-8 col-md-6 col-sm-6 mb-2" style="padding-top: 10px">
            <i class="fa fa-filter" style="font-size:x-large ;color: rgb(83, 93, 107); padding-left: 10px;"></i>
            &nbsp;
            <input
                style="margin-right: 1px; border-radius: 4px; border: 1px solid lightgray; padding: 5px;height: 40px;"
                type="text" name="daterange" value="01/01/2023 - 01/15/2023" />
            &nbsp; &nbsp;
            <i class="fa fa-user" style="font-size:x-large ;color: rgb(83, 93, 107); "></i>
            &nbsp;
            <select
                style="margin-right: 1px; border-radius: 4px; border: 1px solid lightgray; padding: 5px;height: 40px;"
                class="js-example-basic-single">
                <option>Choose Customer</option>
                <option>SFO Technologies</option>
                <option>Pfizer</option>
                <option>Borwarner</option>
                <option>Aargee</option>
                <option>Prakash Plastics</option>
            </select>



        </div>
        <div class="col-lg-4">
            <div class="col-lg-12 col-md-6 col-sm-12" style="padding-top: 10px; padding-right: 30px; float: left;">
                <div class="row justify-content-end">
                    <div class="col-lg-6 col-md-6 mb-2">
                        <input class="form-control mr-sm-2" type="text" id="myInputx" placeholder="Search"
                            aria-label="Search" name="search">
                    </div>
                    <div class="col-lg-1 col-md-1">
                        <button class="btn btn-outline-primary my-2 my-sm-0" type="submit">
                            <i class="fa fa-search" aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Search Input and Search Icon -->

    </div>
    <div class="row">
        <div class="col-lg-12">
            <table class="table table-hover text-center" id="main_table">
                <thead>
                    <tr>

                        <th>SO Number</th>
                        <th>Customer</th>
                        <th>Delivery Date</th>
                    </tr>
                </thead>
                <tbody id="main_pp">
                    <tr>

                        <td>SOCB_001</td>
                        <td>Pfizer</td>
                        <td>10-04-2023</td>
                    </tr>
                    <tr>

                        <td>SOCB_002</td>
                        <td>Aargee</td>
                        <td>12-02-2023</td>
                    </tr>
                    <tr>

                        <td>SOCB_003</td>
                        <td>Borwarner</td>
                        <td>22-02-2023</td>
                    </tr>
                    <tr>

                        <td>SOCB_004</td>
                        <td>Aargee</td>
                        <td>14-02-2023</td>
                    </tr>
                    <tr>

                        <td>SOCB_005</td>
                        <td>Prakash Plastics</td>
                        <td>11-02-2023</td>
                    </tr>
                    <tr>

                        <td>SOCB_006</td>
                        <td>SFO Technologies</td>
                        <td>05-02-2023</td>
                    </tr>
                    <tr>

                        <td>SOCB_007</td>
                        <td>Amazon</td>
                        <td>12-02-2023</td>
                    </tr>
                    <tr>

                        <td>SOCB_006</td>
                        <td>SFO Technologies</td>
                        <td>05-02-2023</td>
                    </tr>
                    <tr>

                        <td>SOCB_007</td>
                        <td>Amazon</td>
                        <td>12-02-2023</td>
                    </tr>
                    <tr>

                        <td>SOCB_006</td>
                        <td>SFO Technologies</td>
                        <td>05-02-2023</td>
                    </tr>

                </tbody>

            </table>
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 col-md-12 mb-2"></div>
                    <div class="col-lg-4 col-md-12 mb-2">
                        <nav aria-label="..." id="page1">
                            <ul class="pagination justify-content-center" id="pagination1"></ul>
                        </nav>
                    </div>
                    <div class="col-lg-4 col-md-12 mb-2"></div>
                </div>
            </div>
        </div>
    </div>
    <br>

    <!--Jc Modal-->
    <div tabindex="-1" class="modal pmd-modal fade" id="vertically-centered" style="display: none;" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl" style="height: 500px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">JobCard Details</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    <span class="glyphicon glyphicon-remove"></span>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <table class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th>JobCardID</th>
                                    <th>Operator Name</th>
                                    <th>Machine Number</th>
                                    <th>Date</th>
                                    <th>Shift</th>
                                    <th>Accepted Quantity</th>
                                    <th>Rejected Quantity</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>NA7160SA</td>
                                    <td>Dom</td>
                                    <td>001</td>
                                    <td>12/03/2023</td>
                                    <td>Shift1</td>
                                    <td>200</td>
                                    <td>100</td>
                                    <td><span class="badge bg-primary">In-Progress</span></td>
                                </tr>
                                <tr>
                                    <td>NA7160SA</td>
                                    <td>Dom</td>
                                    <td>001</td>
                                    <td>12/03/2023</td>
                                    <td>Shift1</td>
                                    <td>200</td>
                                    <td>100</td>
                                    <td><span class="badge bg-primary">In-Progress</span></td>
                                </tr>
                                <tr>
                                    <td>NA7160SA</td>
                                    <td>Dom</td>
                                    <td>001</td>
                                    <td>12/03/2023</td>
                                    <td>Shift1</td>
                                    <td>200</td>
                                    <td>100</td>
                                    <td><span class="badge bg-primary">In-Progress</span></td>
                                </tr>
                                <tr>
                                    <td>NA7160SA</td>
                                    <td>Dom</td>
                                    <td>001</td>
                                    <td>12/03/2023</td>
                                    <td>Shift1</td>
                                    <td>200</td>
                                    <td>100</td>
                                    <td><span class="badge bg-primary">In-Progress</span></td>
                                </tr>
                                <tr>
                                    <td>NA7016AS</td>
                                    <td>Paul</td>
                                    <td>002</td>
                                    <td>12/03/2023</td>
                                    <td>Shift1</td>
                                    <td>300</td>
                                    <td>100</td>
                                    <td><span class="badge bg-primary">In-Progress</span></td>
                                </tr>
                                <tr>
                                    <td>AN7160SA</td>
                                    <td>Hopper</td>
                                    <td>003</td>
                                    <td>12/03/2023</td>
                                    <td>Shift2</td>
                                    <td>400</td>
                                    <td>100</td>
                                    <td><span class="badge bg-primary">In-Progress</span></td>
                                </tr>
                                <tr>
                                    <td>AN7160AS</td>
                                    <td>Steve</td>
                                    <td>004</td>
                                    <td>12/03/2023</td>
                                    <td>Shift3</td>
                                    <td>400</td>
                                    <td>0</td>
                                    <td><span class="badge bg-success">Completed</span></td>
                                </tr>
                                <tr>
                                    <td>AN7160AS</td>
                                    <td>Steve</td>
                                    <td>004</td>
                                    <td>12/03/2023</td>
                                    <td>Shift3</td>
                                    <td>400</td>
                                    <td>0</td>
                                    <td><span class="badge bg-success">Completed</span></td>
                                </tr>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Modal-->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" style="max-width: 80%; max-height: 85%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">SalesOrder Tree </h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-8">
                            <div class="treeview">
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card" style="height: 500px; overflow: auto;">
                                <div class="card-header">
                                    <h5 class="card-title" style="color: rgb(41, 47, 54);">Workorders</h5>
                                </div>
                                <div class="card-body">
                                    <div class="dropdown">
                                        <button class="btn btn-secondary dropdown-toggle" type="button"
                                            id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                                            Select Process
                                        </button>
                                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <li><a class="dropdown-item" href="#">Assembly</a></li>
                                            <li><a class="dropdown-item" href="#">Powder Coating</a></li>
                                            <li><a class="dropdown-item" href="#">Cutting</a></li>
                                            <li><a class="dropdown-item" href="#">Welding</a></li>
                                        </ul>
                                    </div>
                                    <br>
                                    <h6>Quantity: 400</h6>
                                    <br>
                                    <canvas id="barChart" style="height: 300px;"></canvas>
                                    <br>

                                    <button type="button" id="target" class="btn btn-primary" data-bs-toggle="modal"
                                        data-bs-target="#vertically-centered" style="width: 45%; float: right;">View
                                        JobCards
                                    </button>
                                </div>
                            </div>
                        </div>


                    </div>

                </div>
            </div>
        </div>
    </div>




    <!--Script for creating Modal when clicked -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const rows = document.querySelectorAll('#main_table tbody tr');
            const modal = new bootstrap.Modal(document.getElementById('staticBackdrop'));

            rows.forEach(row => {
                row.addEventListener('click', function () {
                    modal.show();
                });
            });

            // Close the modal when clicking on the close button
            document.querySelector('.btn-close').addEventListener('click', function () {
                modal.hide();
            });

            // Close the modal when clicking outside of it
            window.addEventListener('click', function (event) {
                if (event.target == modal._element) {
                    modal.hide();
                }
            });
        });

    </script>

    <!--Tre structure script-->


    <script>
        var ctx = document.getElementById('barChart').getContext('2d');
        var barChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Accepted', ' Rejected', 'Pending'],
                datasets: [{
                    label: 'Workorders',
                    data: [350, 100, 150], // Replace with your actual data
                    backgroundColor: [
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(255, 206, 86, 0.2)',



                    ],
                    borderColor: [
                        'rgba(75, 192, 192, 1)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(255, 206, 86, 1)',

                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>


    <script>
        class Treeview {
            constructor(treeviewId, imageBaseUrl) {
                this.treeviewId = treeviewId;
                this.selected = null;
                this.imageBase = imageBaseUrl;
            };
            on(eventName, fn) {
                var me = this;
                switch (eventName) {
                    case "select": {
                        document.querySelector(this.treeviewId).addEventListener("click", (event) => {
                            if (event.target.nodeName == 'SUMMARY') {
                                if (me.selected != null) {
                                    document.getElementById(me.selected).removeAttribute("selected");
                                }
                                document.getElementById(event.target.id).setAttribute("selected", "true");
                                console.log(event.target.id);
                                me.selected = event.target.id;
                                event.target.setAttribute("open", !event.target.parentNode.hasAttribute("open"));
                                fn(event)
                            }
                        });
                        break;
                    }
                }
            }
            appendData(data, targetId) {
                document.getElementById(targetId).parentNode.innerHTML += this.walkData(data);
            };
            replaceData(data, targetId) {
                if (targetId != null) {
                    var target = document.getElementById(targetId);
                    target.outerHTML = this.walkData(data)
                }
                else {
                    var target = document.querySelector(this.treeviewId);
                    target.innerHTML = this.walkData(data);
                }
            };
            walkData(data) {
                var me = this;
                var buf = Object.keys(data).map((key) => {
                    let children = data[key].children ? me.walkData(data[key].children) : "";
                    let line = children ? "<hr>" : "";
                    let backgroundColor = data[key].backgroundColor ? `background-color: ${data[key].backgroundColor};` : "";
                    return `<details style="list-style-type: none;"><summary id="${key}" style="${backgroundColor}; border-bottom: 1px solid white; padding:8px; cursor: pointer;" ${Object.keys(data[key]).map((subkey) => { return subkey != 'children' ? `data-${subkey}="${data[key][subkey]}"` : ' ' }).join(' ')}>${data[key].label}</summary>
        ${children}${line}</details>`;
                });
                return buf.join("\n");
            };


            open(id) {
                var node = document.getElementById(id);
                while (node.parentNode.nodeName == "DETAILS") {
                    node = node.parentNode;
                    node.setAttribute("open", "true");
                }
            };
            close(id) {
                var node = document.getElementById(id).parentNode;
                node.removeAttribute("open");
                var detailNodes = node.querySelectorAll("DETAILS");
                console.log(detailNodes); detailNodes.forEach((node) => node.removeAttribute("open"));
            };
            select(id) {
                this.open(id);
                document.getElementById(id).focus();
                document.getElementById(id).click();
            }
        }

        var data = {
            categories: {
                label: "Metal Bottle",
                backgroundColor: "#cdffc0",
                children: {
                    "class:Steel": {
                        label: "Steelplate",
                        type: "class:category",
                        children: {
                            "class:Steelplate": {
                                label: "Aluminium Plate",

                                type: "class:Steelplate",
                            },
                            "Steel:Steelplate": {
                                label: "Stainless Bold",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                        }
                    },
                    "class:clamb": {
                        label: "U-Clamb",
                        type: "class:category",
                        children: {
                            "class:plate": {
                                label: "Aluminium Plate",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                            "Steel:plate": {
                                label: "Stainless Bold",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                        }
                    },
                    "class:Rod": {
                        label: "Iron Rod",
                        type: "class:category",
                        children: {
                            "class:Steelplat": {
                                label: "Aluminium Plate",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                            "Steel:Steelplat": {
                                label: "Stainless Bold",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                        }
                    },
                    "class:Nail": {
                        label: "Galvanised Nail",
                        type: "class:category",
                        children: {
                            "class:Steelplate": {
                                label: "Aluminium Plate",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                            "Steel:Steelplate": {
                                label: "Stainless Bold",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                        }
                    }

                }
            },
            categories2: {
                label: "Wood Table",
                backgroundColor: "#c9c9c9",

                children: {
                    "class:Steel": {
                        label: "Steelplate",
                        type: "class:category",
                        children: {
                            "class:Steelplate": {
                                label: "Aluminium Plate",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                            "Steel:Steelplate": {
                                label: "Stainless Bold",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                        }
                    },
                    "class:clamb": {
                        label: "U-Clamb",
                        type: "class:category",
                        children: {
                            "class:plate": {
                                label: "Aluminium Plate",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                            "Steel:plate": {
                                label: "Stainless Bold",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                        }
                    },
                    "class:Rod": {
                        label: "Iron Rod",
                        type: "class:category",
                        children: {
                            "class:Steelplate": {
                                label: "Aluminium Plate",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                            "Steel:Steelplate": {
                                label: "Stainless Bold",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                        }
                    },
                    "class:Nail": {
                        label: "Galvanised Nail",
                        type: "class:category",
                        children: {
                            "class:Steelplate": {
                                label: "Aluminium Plate",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                            "Steel:Steelplate": {
                                label: "Stainless Bold",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                        }
                    }

                }
            },
            categories3: {
                label: "Cupboard",
                backgroundColor: "#ece38a",

                children: {
                    "class:Steel": {
                        label: "Steelplate",
                        type: "class:category",
                        children: {
                            "class:Steelplate": {
                                label: "Aluminium Plate",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                            "Steel:Steelplate": {
                                label: "Stainless Bold",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                        }
                    },
                    "class:clamb": {
                        label: "U-Clamb",
                        type: "class:category",
                        children: {
                            "class:plate": {
                                label: "Aluminium Plate",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                            "Steel:plate": {
                                label: "Stainless Bold",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                        }
                    },
                    "class:Rod": {
                        label: "Iron Rod",
                        type: "class:category",
                        children: {
                            "class:Steelplate": {
                                label: "Aluminium Plate",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                            "Steel:Steelplate": {
                                label: "Stainless Bold",
                                icon: "product.png",
                                type: "class:Steelplate",
                            },
                        }
                    },
                    "class:Nail": {
                        label: "Galvanised Nail",
                        type: "class:category",
                        children: {
                            "class:Steelplate": {
                                label: "Aluminium Plate",
                                icon: "item.png",
                                type: "class:Steelplate",
                            },
                            "Steel:Steelplate": {
                                label: "Stainless Bold",

                            },
                        }
                    }

                }
            }


        };

        var treeview = new Treeview(".treeview", "https://s3-us-west-2.amazonaws.com/s.cdpn.io/620300/");
        treeview.on("select", (event) => {
            var node = event.target;
            var data = node.dataset
            display.innerHTML = `<div class="label">${data.label}</div>${data.description ? `<div class="descr">${data.description}</div>` : ''}`;
            console.log(event.target)
        });
        treeview.replaceData(data);

        treeview.select("patient:janeDoe")
        treeview.appendData(physicians, "categories");


    </script>

    <script>
        // Sample data for the chart
        const chartData = {
            series: [{
                name: 'Quantity',
                data: [140, 50, 90,]
            },],
            categories: ['Acepted ', 'Rejected', 'Pending']
        };

        // Options for the chart
        const chartOptions = {
            chart: {
                type: 'bar',

                height: 350,

                stacked: false,
            },
            title: {
                text: 'Total Production Quantity' // Here is where you define the title
            },
            plotOptions: {
                bar: {
                    horizontal: false,
                    colors: {
                        ranges: [{
                            from: 0,
                            to: 50,
                            color: '#FF6868' // Color for values <= 50
                        }, {
                            from: 51,
                            to: 100,
                            color: '#FDE767' // Color for values between 51 and 100
                        }, {
                            from: 101,
                            to: 200,
                            color: '#74E291' // Color for values between 101 and 200
                        }],
                    },
                },
            },
            series: chartData.series,
            xaxis: {
                categories: chartData.categories,
            },
            legend: {
                position: 'top',
            },
            fill: {
                opacity: 1,
            },
        };

        // Create the chart
        const chart = new ApexCharts(document.querySelector("#chart"), chartOptions);

        // Render the chart
        chart.render();
    </script>
    <script>
        var options = {
            series: [140, 50, 90],
            chart: {
                width: 350,
                type: 'pie'
            },
            labels: ['Accepted Quantity', 'Rejected Quantity', 'Pending Quantity'],
            colors: ['#74E291', '#FF6868', '#FDE767'],
            responsive: [{
                breakpoint: 480,
                options: {
                    chart: {
                        width: 200
                    },
                    legend: {
                        position: 'bottom'
                    },

                }
            }]
        };

        var chart2 = new ApexCharts(document.querySelector("#chart2"), options);
        chart2.render();  </script>


    <!--DATE PICKER-->
    <script type="text/javascript" src="assets/daterangepicker-master/moment.min.js"></script>
    <script type="text/javascript" src="assets/daterangepicker-master/daterangepicker.js"></script>
    <script>
        $(function () {
            $('input[name="daterange"]').daterangepicker({
                opens: 'left'
            }, function (start, end, label) {
                console.log(
                    "A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD')
                );
            });
        });
    </script>
    <script>

        $(function () {
            $('input[name="daterange"]').daterangepicker({
                opens: 'left'
            }, function (start, end, label) {
                console.log(
                    "A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD')
                );
            });
        });
    </script>
    <!-- pop-up search function -->
    <script>
        function searchTable() {
            var input = document
                .getElementById("myInput")
                .value
                .toLowerCase();
            var rows = document.querySelectorAll("#so_details tbody tr");

            var found = false; // Variable to track if any matching rows are found

            for (var i = 0; i < rows.length; i++) {
                var row = rows[i];
                var rollNumberCell = row.cells[1]
                    ? row
                        .cells[1]
                        .textContent
                        .toLowerCase()
                    : '';
                var selectDeviceCell = row.cells[5]
                    ? row
                        .cells[5]
                        .textContent
                        .toLowerCase()
                    : '';

                if (rollNumberCell.includes(input) || selectDeviceCell.includes(input)) {
                    row.style.display = "";
                    // displayTableRows();
                    found = true;
                } else {
                    row.style.display = "none";

                }
            }
            if (input === '') {
                currentPage = 1;
                displayTableRows(
                    'so_details',
                    'pagination2',
                    currentPageTable2,
                    rowsPerPageTable2
                );
            }

            var existingNoDataRow = document.getElementById("noDataRow");
            if (existingNoDataRow) {
                existingNoDataRow.remove();
            }

            // Create a new row for the "No data found" message
            if (!found) {

                var tableBody = document.querySelector("#so_details tbody");
                var noDataRow = tableBody.insertRow();
                var cell = noDataRow.insertCell(0);
                cell.colSpan = 7;
                cell.textContent = "No data found.";
                noDataRow.id = "noDataRow";
            }

        }
        var searchInput = document.getElementById("myInput");
        searchInput.addEventListener("keyup", searchTable);
    </script>

    <!-- main table search -->

    <script>
        $(document).ready(function () {
            $('.js-example-basic-single').select2();
        });
    </script>
    <script>
        function searchTablex() {
            var inputx = document
                .getElementById("myInputx")
                .value
                .toLowerCase();
            var rowsx = document.querySelectorAll("#main_table tbody tr");

            var found = false; // Variable to track if any matching rows are found

            for (var i = 0; i < rowsx.length; i++) {
                var rowx = rowsx[i];
                var rollNumberCellx = rowx.cells[1]
                    ? rowx
                        .cells[1]
                        .textContent
                        .toLowerCase()
                    : '';
                var customerNameCell = rowx.cells[3]
                    ? rowx
                        .cells[3]
                        .textContent
                        .toLowerCase()
                    : '';

                var selectDeviceCellx = rowx.cells[2]
                    ? rowx
                        .cells[2]
                        .textContent
                        .toLowerCase()
                    : '';

                if (rollNumberCellx.includes(inputx) || selectDeviceCellx.includes(inputx) || customerNameCell.includes(inputx)) {
                    rowx.style.display = "";
                    // displayTableRows();
                    found = true;
                } else {
                    rowx.style.display = "none";

                }
            }
            if (inputx === '') {
                currentPage = 1;
                displayTableRows(
                    'main_table',
                    'pagination1',
                    currentPageTable1,
                    rowsPerPageTable1
                );
            }

            var existingNoDataRow = document.getElementById("noDataRow");
            if (existingNoDataRow) {
                existingNoDataRow.remove();
            }

            // Create a new row for the "No data found" message
            if (!found) {

                var tableBody = document.querySelector("#main_table tbody");
                var noDataRow = tableBody.insertRow();
                var cell = noDataRow.insertCell(0);
                cell.colSpan = 7;
                cell.textContent = "No data found.";
                noDataRow.id = "noDataRow";
            }

        }
        var searchInput = document.getElementById("myInputx");
        searchInput.addEventListener("keyup", searchTablex);
    </script>
    <script>
        var currentPageTable1 = 1;
        var currentPageTable2 = 1;
        var rowsPerPageTable1 = 10;
        var rowsPerPageTable2 = 5;
        var pagesToShow = 5;

        function displayTableRows(tableId, paginationId, currentPage, rowsPerPage) {
            var tableRows = document.querySelectorAll('#' + tableId + ' tbody tr');
            var totalPages = Math.ceil(tableRows.length / rowsPerPage);

            var paginationList = document.querySelector('#' + paginationId);
            paginationList.innerHTML = '';

            var previousButton = document.createElement('li');
            previousButton.className = 'page-item';
            previousButton.innerHTML = '<a class="page-link" href="#">Previous</a>';
            previousButton.addEventListener('click', function () {
                previousPage(tableId, paginationId, rowsPerPage);
            });
            paginationList.appendChild(previousButton);

            var startPage = Math.max(1, currentPage - Math.floor(pagesToShow / 2));
            var endPage = Math.min(startPage + pagesToShow - 1, totalPages);

            for (var i = startPage; i <= endPage; i++) {
                var pageItem = document.createElement('li');
                pageItem.className = 'page-item';
                if (i === currentPage) {
                    pageItem
                        .classList
                        .add('active');
                }
                var pageLink = document.createElement('a');
                pageLink.className = 'page-link';
                pageLink.href = '#';
                pageLink.textContent = i;
                pageLink.onclick = function () {
                    goToPage(tableId, paginationId, parseInt(this.textContent), rowsPerPage);
                };
                pageItem.appendChild(pageLink);
                paginationList.appendChild(pageItem);
            }

            var nextButton = document.createElement('li');
            nextButton.className = 'page-item';
            nextButton.innerHTML = '<a class="page-link" href="#">Next</a>';
            nextButton.addEventListener('click', function () {
                nextPage(tableId, paginationId, rowsPerPage);
            });
            paginationList.appendChild(nextButton);

            var startIndex = (currentPage - 1) * rowsPerPage;
            var endIndex = startIndex + rowsPerPage;
            for (var i = 0; i < tableRows.length; i++) {
                if (i >= startIndex && i < endIndex) {
                    tableRows[i].style.display = 'table-row';
                } else {
                    tableRows[i].style.display = 'none';
                }
            }
        }

        function goToPage(tableId, paginationId, pageNumber, rowsPerPage) {
            if (tableId === 'main_table') {
                currentPageTable1 = pageNumber;
            } else if (tableId === 'so_details') {
                currentPageTable2 = pageNumber;
            }
            displayTableRows(tableId, paginationId, pageNumber, rowsPerPage);
        }

        function previousPage(tableId, paginationId, rowsPerPage) {
            if (tableId === 'main_table' && currentPageTable1 > 1) {
                currentPageTable1--;
            } else if (tableId === 'so_details' && currentPageTable2 > 1) {
                currentPageTable2--;
            }
            displayTableRows(
                tableId,
                paginationId,
                tableId === 'main_table'
                    ? currentPageTable1
                    : currentPageTable2,
                rowsPerPage
            );
        }

        function nextPage(tableId, paginationId, rowsPerPage) {
            var tableRows = document.querySelectorAll('#' + tableId + ' tbody tr');
            var totalPages = Math.ceil(tableRows.length / rowsPerPage);

            if (tableId === 'main_table' && currentPageTable1 < totalPages) {
                currentPageTable1++;
            } else if (tableId === 'so_details' && currentPageTable2 < totalPages) {
                currentPageTable2++;
            }

            displayTableRows(
                tableId,
                paginationId,
                tableId === 'main_table'
                    ? currentPageTable1
                    : currentPageTable2,
                rowsPerPage
            );
        }

        // Call displayTableRows for both tables after defining the functions
        displayTableRows(
            'main_table',
            'pagination1',
            currentPageTable1,
            rowsPerPageTable1
        );
        displayTableRows(
            'so_details',
            'pagination2',
            currentPageTable2,
            rowsPerPageTable2
        );
    </script>




</body>

</html>