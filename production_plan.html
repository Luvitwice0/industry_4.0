<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monthly Production Schedular</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Bootstrap Library -->
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" type="text/css" media="all" href="assets/daterangepicker-master/daterangepicker.css">
    <script src="assets/lib/jquery/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <style>
        body {
            padding: 5px;

            box-sizing: border-box;
            border: 1px solid #ddd;
        }

        #main_table {
            font-family: Arial, Helvetica, sans-serif;
            border-collapse: separate;
            border-spacing: 0 10px;
            width: 100%;
            border: none;
        }

        #main_table td,
        #main_table th {
            padding: 10px;
            border: none;
        }

        #main_table tr {
            background-color: #eaeefa;
            border: none;
        }

        #main_table th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: center;
            background-color: #d9dff3;
            border: none;
        }

        #main_table td:first-child,
        #main_table th:first-child {
            border-radius: 10px 0 0 10px;
            border: none;
        }

        #main_table td:last-child,
        #main_table th:last-child {
            border-radius: 0 10px 10px 0;
            border: none;
        }
    </style>
</head>

<body>
    <div class="row" style="padding-top: 10px; padding-bottom: 5px;">
        <!-- Select Month and Add Button -->


        <div class=" col-lg-8 col-md-6 col-sm-6 mb-2" style="padding-top: 10px">
            <i class="fa fa-filter" style="font-size:x-large ;color: rgb(83, 93, 107); padding-left: 10px;"></i>
            &nbsp;
            <input
                style="margin-right: 1px; border-radius: 4px; border: 1px solid lightgray; padding: 5px;height: 40px;"
                type="text" name="daterange" value="01/01/2023 - 01/15/2023" />
            &nbsp; &nbsp;
            <i class="fa fa-user" style="font-size:x-large ;color: rgb(83, 93, 107); "></i>
            &nbsp;
            <select
                style="margin-right: 1px; border-radius: 4px; border: 1px solid lightgray; padding: 5px;height: 40px;"
                class="js-example-basic-single">
                <option>Choose Customer</option>
                <option>SFO Technologies</option>
                <option>Pfizer</option>
                <option>Borwarner</option>
                <option>Aargee</option>
                <option>Prakash Plastics</option>
            </select>
            &nbsp; &nbsp; &nbsp;
            <button type="button" id="target" class="btn btn-primary" data-bs-toggle="modal"
                data-bs-target="#target_date" x>Auto Generate WorkOrder</button>

        </div>
        <div class="col-lg-4">
            <div class="col-lg-12 col-md-6 col-sm-12" style="padding-top: 10px; padding-right: 30px; float: left;">
                <div class="row justify-content-end">
                    <div class="col-lg-6 col-md-6 mb-2">
                        <input class="form-control mr-sm-2" type="text" id="myInputx" placeholder="Search"
                            aria-label="Search" name="search">
                    </div>
                    <div class="col-lg-1 col-md-1">
                        <button class="btn btn-outline-primary my-2 my-sm-0" type="submit">
                            <i class="fa fa-search" aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Search Input and Search Icon -->

    </div>
    <div class="row">
        <div class="col-lg-12">
            <table class="table table-hover text-center" id="main_table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>SO Number</th>
                        <th>Customer</th>
                        <th>Delivery Date</th>
                    </tr>
                </thead>
                <tbody id="main_pp">
                    <tr>
                        <td scope="row">
                            <input class="form-check-input" type="checkbox" style="border-color: black;" value=""
                                id="flexCheckDefault">
                        </td>
                        <td>SOCB_001</td>
                        <td>Pfizer</td>
                        <td>10-04-2023</td>
                    </tr>
                    <tr>
                        <td scope="row">
                            <input class="form-check-input" type="checkbox" style="border-color: black;" value=""
                                id="flexCheckDefault">
                        </td>
                        <td>SOCB_002</td>
                        <td>Aargee</td>
                        <td>12-02-2023</td>
                    </tr>
                    <tr>
                        <td scope="row">
                            <input class="form-check-input" type="checkbox" style="border-color: black;" value=""
                                id="flexCheckDefault">
                        </td>
                        <td>SOCB_003</td>
                        <td>Borwarner</td>
                        <td>22-02-2023</td>
                    </tr>
                    <tr>
                        <td scope="row">
                            <input class="form-check-input" type="checkbox" style="border-color: black;" value=""
                                id="flexCheckDefault">
                        </td>
                        <td>SOCB_004</td>
                        <td>Aargee</td>
                        <td>14-02-2023</td>
                    </tr>
                    <tr>
                        <td scope="row">
                            <input class="form-check-input" type="checkbox" style="border-color: black;" value=""
                                id="flexCheckDefault">
                        </td>
                        <td>SOCB_005</td>
                        <td>Prakash Plastics</td>
                        <td>11-02-2023</td>
                    </tr>
                    <tr>
                        <td scope="row">
                            <input class="form-check-input" type="checkbox" style="border-color: black;" value=""
                                id="flexCheckDefault">
                        </td>
                        <td>SOCB_006</td>
                        <td>SFO Technologies</td>
                        <td>05-02-2023</td>
                    </tr>
                    <tr>
                        <td scope="row">
                            <input class="form-check-input" type="checkbox" style="border-color: black;" value=""
                                id="flexCheckDefault">
                        </td>
                        <td>SOCB_007</td>
                        <td>Amazon</td>
                        <td>12-02-2023</td>
                    </tr>
                    <tr>
                        <td scope="row">
                            <input class="form-check-input" type="checkbox" style="border-color: black;" value=""
                                id="flexCheckDefault">
                        </td>
                        <td>SOCB_006</td>
                        <td>SFO Technologies</td>
                        <td>05-02-2023</td>
                    </tr>
                    <tr>
                        <td scope="row">
                            <input class="form-check-input" type="checkbox" style="border-color: black;" value=""
                                id="flexCheckDefault">
                        </td>
                        <td>SOCB_007</td>
                        <td>Amazon</td>
                        <td>12-02-2023</td>
                    </tr>
                    <tr>
                        <td scope="row">
                            <input class="form-check-input" type="checkbox" style="border-color: black;" value=""
                                id="flexCheckDefault">
                        </td>
                        <td>SOCB_006</td>
                        <td>SFO Technologies</td>
                        <td>05-02-2023</td>
                    </tr>

                </tbody>

            </table>

            <div class="container">
                <div class="row">
                    <div class="col-lg-4 col-md-12 mb-2"></div>
                    <div class="col-lg-4 col-md-12 mb-2">
                        <nav aria-label="..." id="page1">
                            <ul class="pagination justify-content-center" id="pagination1"></ul>
                        </nav>
                    </div>
                    <div class="col-lg-4 col-md-12 mb-2"></div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <!-- Modal -->
    <div class="modal fade" id="target_date" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true" style=" text-align: center;">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Select Target Date
                    </h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="date" class="form-control" id="Date" placeholder="Quality " value=""
                        required="required" autocomplete="off">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary">Generate WorkOrder</button>
                </div>
            </div>

        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Monthly Production Plan | Select SO</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <div class="row justify-content-end">
                            <div class="col-lg-5 col-md-12 mb-2">
                                <input class="form-control mr-sm-2" type="text" id="myInput" placeholder="Search"
                                    aria-label="Search" name="search">
                            </div>
                            <div class="col-lg-1 col-md-12" style="padding-left: 0px;">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <br>
                    <table class="table table-hover" style="text-align: center;" id="so_details">
                        <thead>
                            <tr>
                                <th scope="col" class="text-center">#</th>
                                <th scope="col" class="text-center">SO Number</th>
                                <th scope="col" class="text-center">Customer Name</th>
                                <th scope="col" class="text-center">Delivery Date</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <tr>
                                <th scope="row">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                </th>
                                <td>SOCB_001</td>
                                <td>Arvind Shetty</td>
                                <td>10-02-2023</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                </th>
                                <td>SOCB_002</td>
                                <td>Jane Smith</td>
                                <td>10-02-2023</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                </th>
                                <td>SOCB_003</td>
                                <td>Badmanathan</td>
                                <td>10-02-2023</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                </th>
                                <td>SOCB_004</td>
                                <td>Vignesh</td>
                                <td>10-02-2023</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                </th>
                                <td>SOCB_005</td>
                                <td>Vinoth Raj</td>
                                <td>10-02-2023</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                </th>
                                <td>SOCB_006</td>
                                <td>Rajesh v</td>
                                <td>10-02-2023</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                </th>
                                <td>SOCB_007</td>
                                <td>Alexander Lee</td>
                                <td>10-02-2023</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                </th>
                                <td>SOCB_008</td>
                                <td>Nitheesh</td>
                                <td>10-02-2023</td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                </th>
                                <td>SOCB_009</td>
                                <td>Lalith Anand</td>
                                <td>10-02-2023</td>
                            </tr>
                        </tbody>

                        <tbody id="noDataRow" style="display: none;">
                            <tr>
                                <td colspan="7" style="text-align: center;">No data found.</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-4 col-md-12 mb-2"></div>
                            <div class="col-lg-4 col-md-12 mb-2">
                                <nav aria-label="..." id="page2">
                                    <ul class="pagination justify-content-center" id="pagination2"></ul>
                                </nav>
                            </div>
                            <div class="col-lg-4 col-md-12 mb-2"></div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <!-- <button type="button" class="btn btn-secondary"
                                                                                data-bs-dismiss="modal">Close</button> -->
                        <button type="button" class="btn btn-primary">Save</button>
                    </div>
                </div>
            </div>
        </div>

        <!--DATE PICKER-->
        <script type="text/javascript" src="assets/daterangepicker-master/moment.min.js"></script>
        <script type="text/javascript" src="assets/daterangepicker-master/daterangepicker.js"></script>
        <script>
            $(function () {
                $('input[name="daterange"]').daterangepicker({
                    opens: 'left'
                }, function (start, end, label) {
                    console.log(
                        "A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD')
                    );
                });
            });
        </script>
        <script>

            $(function () {
                $('input[name="daterange"]').daterangepicker({
                    opens: 'left'
                }, function (start, end, label) {
                    console.log(
                        "A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD')
                    );
                });
            });
        </script>
        <!-- pop-up search function -->
        <script>
            function searchTable() {
                var input = document
                    .getElementById("myInput")
                    .value
                    .toLowerCase();
                var rows = document.querySelectorAll("#so_details tbody tr");

                var found = false; // Variable to track if any matching rows are found

                for (var i = 0; i < rows.length; i++) {
                    var row = rows[i];
                    var rollNumberCell = row.cells[1]
                        ? row
                            .cells[1]
                            .textContent
                            .toLowerCase()
                        : '';
                    var selectDeviceCell = row.cells[5]
                        ? row
                            .cells[5]
                            .textContent
                            .toLowerCase()
                        : '';

                    if (rollNumberCell.includes(input) || selectDeviceCell.includes(input)) {
                        row.style.display = "";
                        // displayTableRows();
                        found = true;
                    } else {
                        row.style.display = "none";

                    }
                }
                if (input === '') {
                    currentPage = 1;
                    displayTableRows(
                        'so_details',
                        'pagination2',
                        currentPageTable2,
                        rowsPerPageTable2
                    );
                }

                var existingNoDataRow = document.getElementById("noDataRow");
                if (existingNoDataRow) {
                    existingNoDataRow.remove();
                }

                // Create a new row for the "No data found" message
                if (!found) {

                    var tableBody = document.querySelector("#so_details tbody");
                    var noDataRow = tableBody.insertRow();
                    var cell = noDataRow.insertCell(0);
                    cell.colSpan = 7;
                    cell.textContent = "No data found.";
                    noDataRow.id = "noDataRow";
                }

            }
            var searchInput = document.getElementById("myInput");
            searchInput.addEventListener("keyup", searchTable);
        </script>

        <!-- main table search -->

        <script>
            $(document).ready(function () {
                $('.js-example-basic-single').select2();
            });
        </script>
        <script>
            function searchTablex() {
                var inputx = document
                    .getElementById("myInputx")
                    .value
                    .toLowerCase();
                var rowsx = document.querySelectorAll("#main_table tbody tr");

                var found = false; // Variable to track if any matching rows are found

                for (var i = 0; i < rowsx.length; i++) {
                    var rowx = rowsx[i];
                    var rollNumberCellx = rowx.cells[1]
                        ? rowx
                            .cells[1]
                            .textContent
                            .toLowerCase()
                        : '';
                    var customerNameCell = rowx.cells[3]
                        ? rowx
                            .cells[3]
                            .textContent
                            .toLowerCase()
                        : '';

                    var selectDeviceCellx = rowx.cells[2]
                        ? rowx
                            .cells[2]
                            .textContent
                            .toLowerCase()
                        : '';

                    if (rollNumberCellx.includes(inputx) || selectDeviceCellx.includes(inputx) || customerNameCell.includes(inputx)) {
                        rowx.style.display = "";
                        // displayTableRows();
                        found = true;
                    } else {
                        rowx.style.display = "none";

                    }
                }
                if (inputx === '') {
                    currentPage = 1;
                    displayTableRows(
                        'main_table',
                        'pagination1',
                        currentPageTable1,
                        rowsPerPageTable1
                    );
                }

                var existingNoDataRow = document.getElementById("noDataRow");
                if (existingNoDataRow) {
                    existingNoDataRow.remove();
                }

                // Create a new row for the "No data found" message
                if (!found) {

                    var tableBody = document.querySelector("#main_table tbody");
                    var noDataRow = tableBody.insertRow();
                    var cell = noDataRow.insertCell(0);
                    cell.colSpan = 7;
                    cell.textContent = "No data found.";
                    noDataRow.id = "noDataRow";
                }

            }
            var searchInput = document.getElementById("myInputx");
            searchInput.addEventListener("keyup", searchTablex);
        </script>
        <script>
            var currentPageTable1 = 1;
            var currentPageTable2 = 1;
            var rowsPerPageTable1 = 10;
            var rowsPerPageTable2 = 5;
            var pagesToShow = 5;

            function displayTableRows(tableId, paginationId, currentPage, rowsPerPage) {
                var tableRows = document.querySelectorAll('#' + tableId + ' tbody tr');
                var totalPages = Math.ceil(tableRows.length / rowsPerPage);

                var paginationList = document.querySelector('#' + paginationId);
                paginationList.innerHTML = '';

                var previousButton = document.createElement('li');
                previousButton.className = 'page-item';
                previousButton.innerHTML = '<a class="page-link" href="#">Previous</a>';
                previousButton.addEventListener('click', function () {
                    previousPage(tableId, paginationId, rowsPerPage);
                });
                paginationList.appendChild(previousButton);

                var startPage = Math.max(1, currentPage - Math.floor(pagesToShow / 2));
                var endPage = Math.min(startPage + pagesToShow - 1, totalPages);

                for (var i = startPage; i <= endPage; i++) {
                    var pageItem = document.createElement('li');
                    pageItem.className = 'page-item';
                    if (i === currentPage) {
                        pageItem
                            .classList
                            .add('active');
                    }
                    var pageLink = document.createElement('a');
                    pageLink.className = 'page-link';
                    pageLink.href = '#';
                    pageLink.textContent = i;
                    pageLink.onclick = function () {
                        goToPage(tableId, paginationId, parseInt(this.textContent), rowsPerPage);
                    };
                    pageItem.appendChild(pageLink);
                    paginationList.appendChild(pageItem);
                }

                var nextButton = document.createElement('li');
                nextButton.className = 'page-item';
                nextButton.innerHTML = '<a class="page-link" href="#">Next</a>';
                nextButton.addEventListener('click', function () {
                    nextPage(tableId, paginationId, rowsPerPage);
                });
                paginationList.appendChild(nextButton);

                var startIndex = (currentPage - 1) * rowsPerPage;
                var endIndex = startIndex + rowsPerPage;
                for (var i = 0; i < tableRows.length; i++) {
                    if (i >= startIndex && i < endIndex) {
                        tableRows[i].style.display = 'table-row';
                    } else {
                        tableRows[i].style.display = 'none';
                    }
                }
            }

            function goToPage(tableId, paginationId, pageNumber, rowsPerPage) {
                if (tableId === 'main_table') {
                    currentPageTable1 = pageNumber;
                } else if (tableId === 'so_details') {
                    currentPageTable2 = pageNumber;
                }
                displayTableRows(tableId, paginationId, pageNumber, rowsPerPage);
            }

            function previousPage(tableId, paginationId, rowsPerPage) {
                if (tableId === 'main_table' && currentPageTable1 > 1) {
                    currentPageTable1--;
                } else if (tableId === 'so_details' && currentPageTable2 > 1) {
                    currentPageTable2--;
                }
                displayTableRows(
                    tableId,
                    paginationId,
                    tableId === 'main_table'
                        ? currentPageTable1
                        : currentPageTable2,
                    rowsPerPage
                );
            }

            function nextPage(tableId, paginationId, rowsPerPage) {
                var tableRows = document.querySelectorAll('#' + tableId + ' tbody tr');
                var totalPages = Math.ceil(tableRows.length / rowsPerPage);

                if (tableId === 'main_table' && currentPageTable1 < totalPages) {
                    currentPageTable1++;
                } else if (tableId === 'so_details' && currentPageTable2 < totalPages) {
                    currentPageTable2++;
                }

                displayTableRows(
                    tableId,
                    paginationId,
                    tableId === 'main_table'
                        ? currentPageTable1
                        : currentPageTable2,
                    rowsPerPage
                );
            }

            // Call displayTableRows for both tables after defining the functions
            displayTableRows(
                'main_table',
                'pagination1',
                currentPageTable1,
                rowsPerPageTable1
            );
            displayTableRows(
                'so_details',
                'pagination2',
                currentPageTable2,
                rowsPerPageTable2
            );
        </script>

        <script>

            function updateTableData() {
                var xhr = new XMLHttpRequest();

                xhr.onreadystatechange = function () {
                    if (xhr.readyState === XMLHttpRequest.DONE) {
                        if (xhr.status == 200) {
                            var response = xhr.responseText;
                            var jsonData = JSON.parse(response);
                            console.log(jsonData)
                            updateDropdownOption02(jsonData.add_quotation);
                            // Initialize DataTables if it hasn't been initialized already
                            displayTableRows();
                        }
                        else {
                            console.error("failed to get the data from server")
                        }

                    }

                }
                xhr.open("GET", "09_add_quotation.json", true)
                xhr.send();
            }

            function updateDropdownOption02(data) {
                console.log(1);
                var employeeSelect = document.getElementById("selectCustomerName");
                employeeSelect.innerHTML = '<option value=""><--Select File name --></option>';

                var employeeNames = [];

                for (var i = 0; i < data.length; i++) {
                    var entry = data[i];

                    if (entry.q_c_name && employeeNames.indexOf(entry.q_c_name) === -1) {
                        employeeNames.push(entry.q_cu);

                        var option = document.createElement("option");
                        option.value = entry.q_c_name;
                        option.textContent = entry.q_c_name;
                        employeeSelect.appendChild(option);

                        console.log(employeeSelect.appendChild(option))
                    }
                }
            }
        </script>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                // Get the checkbox elements
                var checkboxes = document.querySelectorAll('.form-check-input');

                // Get the target button
                var targetButton = document.getElementById('target');

                // Initially disable the button
                targetButton.disabled = true;

                // Add a click event listener to each checkbox
                checkboxes.forEach(function (checkbox) {
                    checkbox.addEventListener('click', function () {
                        // Check if any checkbox is checked
                        var anyCheckboxChecked = Array.from(checkboxes).some(function (cb) {
                            return cb.checked;
                        });

                        // Enable/disable the button based on checkbox state
                        targetButton.disabled = !anyCheckboxChecked;
                    });
                });
            });

        </script>
</body>

</html>